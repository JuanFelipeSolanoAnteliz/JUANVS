<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gestión de Tapas</title>
    <link rel="stylesheet" href="./css/style.css">
    <script src="./js/script.js" defer></script>
</head>
<body>
    <div class="container">
        <h1>Sistema de Gestión de Tapas</h1>
        
        <div class="form-container">
            <h2>Agregar Nuevo Registro</h2>
            <form id="tapas-form">
                <div class="form-group">
                    <label for="ruta">Ruta:</label>
                    <input type="text" id="ruta" required placeholder="Ej: BD1234">
                </div>
                
                <div class="form-group">
                    <label for="n_promociones">Número de Promociones:</label>
                    <input type="number" id="n_promociones" min="0" placeholder="Ej: 20" oninput="calcularTotalTapas()">
                </div>
                
                <div class="form-group">
                    <label for="n_botellas">Número de Botellas:</label>
                    <input type="number" id="n_botellas" min="0" placeholder="Ej: 10" oninput="calcularTotalTapas()">
                </div>
                
                <div class="form-group">
                    <label>Tipo de Tapa a Ingresar:</label>
                    <div class="radio-group">
                        <input type="radio" id="tipo-plastico" name="tipo-tapa" value="plastico" checked>
                        <label for="tipo-plastico">Plástico</label>
                        
                        <input type="radio" id="tipo-metalica" name="tipo-tapa" value="metalica">
                        <label for="tipo-metalica">Metálica</label>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="tapas_ingresadas">Cantidad de Tapas:</label>
                    <input type="number" id="tapas_ingresadas" min="0" placeholder="Ingrese cantidad" oninput="calcularTapaRestante()">
                </div>
                
                <div class="form-group">
                    <label for="tapas_plastico">Tapas Plástico:</label>
                    <input type="number" id="tapas_plastico" readonly>
                </div>
                
                <div class="form-group">
                    <label for="tapas_metalica">Tapas Metálicas:</label>
                    <input type="number" id="tapas_metalica" readonly>
                </div>
                
                <div class="form-group">
                    <label for="total_tapas">Total Tapas:</label>
                    <input type="number" id="total_tapas" readonly>
                </div>
                
                <button type="submit" class="btn-submit">Guardar Registro</button>
            </form>
        </div>
        
        <div class="table-container">
            <h2>Registros</h2>
            <div id="loading-indicator" class="loading-indicator">Cargando datos...</div>
            <table id="registros-table">
                <thead>
                    <tr>
                        <th>Ruta</th>
                        <th>Promociones</th>
                        <th>Botellas</th>
                        <th>Tapas Plástico</th>
                        <th>Tapas Metálicas</th>
                        <th>Total Tapas</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody id="registros-body">
                    <!-- Los registros se agregarán aquí dinámicamente -->
                </tbody>
            </table>
        </div>
    </div>
    
    <!-- Modal para editar registros -->
    <div id="edit-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>Editar Registro</h2>
            <form id="edit-form">
                <input type="hidden" id="edit-record-id">
                <input type="hidden" id="edit-original-ruta">
                <input type="hidden" id="edit-original-promociones">
                
                <div class="form-group">
                    <label for="edit-ruta">Ruta:</label>
                    <input type="text" id="edit-ruta" required>
                </div>
                
                <div class="form-group">
                    <label for="edit-n-promociones">Número de Promociones:</label>
                    <input type="number" id="edit-n-promociones" min="0">
                </div>
                
                <div class="form-group">
                    <label for="edit-n-botellas">Número de Botellas:</label>
                    <input type="number" id="edit-n-botellas" min="0">
                </div>
                
                <div id="ajuste-tapas-container" style="display: none;">
                    <div class="form-group">
                        <label>Ajuste de Tapas:</label>
                        <p id="mensaje-ajuste"></p>
                        <div class="radio-group">
                            <input type="radio" id="edit-ajuste-plastico" name="edit-tipo-ajuste" value="plastico" checked>
                            <label for="edit-ajuste-plastico">Mantener Tapas Plástico</label>
                            
                            <input type="radio" id="edit-ajuste-metalica" name="edit-tipo-ajuste" value="metalica">
                            <label for="edit-ajuste-metalica">Mantener Tapas Metálicas</label>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="edit-tapas-plastico">Tapas Plástico:</label>
                    <input type="number" id="edit-tapas-plastico">
                </div>
                
                <div class="form-group">
                    <label for="edit-tapas-metalica">Tapas Metálicas:</label>
                    <input type="number" id="edit-tapas-metalica">
                </div>
                
                <div class="form-group">
                    <label for="edit-total-tapas">Total Tapas:</label>
                    <input type="number" id="edit-total-tapas" readonly>
                </div>
                
                <button type="submit" class="btn-submit">Guardar Cambios</button>
            </form>
        </div>
    </div>
    
</body>
</html>
